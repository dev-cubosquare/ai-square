---
import ProductCard from './ProductCard.astro';
import { products } from '@/data/products';

interface Props {
  featured?: boolean;
  limit?: number;
  category?: string;
}

const { featured = false, limit, category } = Astro.props;

let filteredProducts = products;

// Filter by featured
if (featured) {
  filteredProducts = filteredProducts.filter(p => p.featured);
}

// Filter by category
if (category && category !== 'all') {
  filteredProducts = filteredProducts.filter(p => p.category === category);
}

// Apply limit
if (limit) {
  filteredProducts = filteredProducts.slice(0, limit);
}
---

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
  {filteredProducts.map((product) => (
    <ProductCard product={product} />
  ))}
</div>

{filteredProducts.length === 0 && (
  <div class="text-center py-12">
    <p class="text-muted-foreground">No products found matching your criteria.</p>
  </div>
)}
